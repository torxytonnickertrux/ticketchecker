/* Utilitários globais 4.0 */
:root {
  --bg: #0b1220;
  --card: #0f172a;
  --text: #ffffff;
  --muted: #94a3b8;
  --accent: #16a34a;
  --ring: #1f2937;
  --font-sans: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
.container { max-width: 1000px; margin: 0 auto; padding: 0 16px; }
.grid { display: grid; gap: 16px; }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.card { background: var(--card); border: 1px solid var(--ring); border-radius: 12px; padding: 16px; }
.list { list-style: none; padding: 0; margin: 0; border: 1px solid var(--ring); border-radius: 12px; overflow: hidden; }
.list-item { padding: 10px 12px; border-bottom: 1px solid var(--ring); }
.list-item:last-child { border-bottom: none; }
.btn { display: inline-block; padding: 10px 16px; border-radius: 10px; font-weight: 600; text-decoration: none; border: none; cursor: pointer; }
.btn-primary { background: var(--accent); color: #fff; }

/* Tipografia e legibilidade */
h1, h2, h3, h4, h5, h6 { font-family: var(--font-sans); text-wrap: balance; }
p, li { text-wrap: pretty; }
code, pre, kbd, samp { font-family: var(--font-mono); }
.num, .stat strong { font-variant-numeric: tabular-nums; }

/* Foco visível e inputs acessíveis */
a:focus-visible, .btn:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible, button:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}
input, select, textarea { border: 1px solid var(--ring); background: transparent; }
input::placeholder, textarea::placeholder { color: var(--muted); }

/* Respeitar cores específicas de cada página; tipografia definida no base.html */

/* Reduzir movimento para usuários com prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
}

/* Flag de tipo de usuário (menu superior) */
.user-flag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 700;
  line-height: 1;
  margin-left: 6px;
  border: 1px solid var(--ring);
  user-select: none;
}
.user-flag:focus-visible { outline: 3px solid var(--accent); outline-offset: 2px; }
.flag-user { background: #334155; color: #cbd5e1; }
.flag-guest { background: #475569; color: #e2e8f0; }
.flag-superuser { background: #a21caf; color: #fff; box-shadow: 0 0 0 2px rgba(162,28,175,0.25); }
.flag-staff { background: #2563eb; color: #fff; box-shadow: 0 0 0 2px rgba(37,99,235,0.25); animation: wobble 1.6s ease-in-out infinite; }
.flag-staff.shake-strong { animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) infinite; }

@keyframes wobble {
  0%   { transform: translateX(0) rotate(0deg); }
  25%  { transform: translateX(1px) rotate(3deg); }
  50%  { transform: translateX(0) rotate(0deg); }
  75%  { transform: translateX(-1px) rotate(-3deg); }
  100% { transform: translateX(0) rotate(0deg); }
}

@keyframes shake {
  0%   { transform: translate(0,0) rotate(0deg); }
  25%  { transform: translate(1px,-1px) rotate(2deg); }
  50%  { transform: translate(-1px,1px) rotate(-2deg); }
  75%  { transform: translate(1px,1px) rotate(2deg); }
  100% { transform: translate(0,0) rotate(0deg); }
}

@media (prefers-reduced-motion: reduce) {
  .flag-staff, .flag-staff.shake-strong { animation: none !important; }
}