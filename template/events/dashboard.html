{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<style>
/* Estilos específicos do dashboard para alto contraste em fundo branco */
.dashboard { color: #0f172a !important; }
.dashboard .stat span { color: #334155 !important; }
.dashboard .stat strong { color: #2563eb !important; }
.dashboard h1, .dashboard h2 { color: #1f2937 !important; }
.dashboard .list .list-item { color: #0f172a !important; }
</style>
<section class="dashboard">
  <h1 style="margin-top:0;">Dashboard</h1>
  <div class="stats-grid">
    <div class="stat"><span>Total de Eventos</span><strong>{{ total_events }}</strong></div>
    <div class="stat"><span>Total de Ingressos</span><strong>{{ total_tickets }}</strong></div>
    <div class="stat"><span>Total de Compras</span><strong>{{ total_purchases }}</strong></div>
    <div class="stat"><span>Receita Total</span><strong>R$ {{ total_revenue }}</strong></div>
  </div>
  <h2 class="mt-3">Eventos recentes</h2>
  <ul class="list">
    {% for e in recent_events %}
    <li class="list-item">{{ e.name }} — {{ e.date|date:"d/m/Y" }}</li>
    {% empty %}
    <li>Nenhum evento.</li>
    {% endfor %}
  </ul>
  <h2 class="mt-3">Compras recentes</h2>
  <ul class="list">
    {% for p in recent_purchases %}
    <li class="list-item">{{ p.user.get_full_name|default:p.user.email }} — {{ p.ticket.event.name }} — R$ {{ p.total_price }}</li>
    {% empty %}
    <li>Nenhuma compra.</li>
    {% endfor %}
  </ul>
</section>
{% endblock %}